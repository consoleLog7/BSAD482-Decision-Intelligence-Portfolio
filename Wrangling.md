# Understanding Canada's Housing Crisis: Drivers of Supply, Demand, and Price

*A Decision Intelligence Analysis of SDG 11 - Sustainable Cities and Communities*

By: Logan Pugsley

## Summary of Data Wrangling Files
Source Data: data/Source Data
Data Wrangling Flows: src/Tableau Prep Flows
Processed Data: data/Processed Data


## Written Summary of Data Wrangling

To complete the data wrangling for this project, three Tableau Prep flows were created to transform all source data into a more simple and consistent format that could be used for analysis. The three flows were called "Economics", "MortgageTableauPrep", and "StatsCanFlow" to account for the types of data mainly transformed within them. All three flows can be found under /src/TableauPrepFlows.


In the "Economics" Tableau Prep flow, the data was all sourced from Statistics Canada, the World Bank, and the Bank of Canada. Each of these files had different formats, so instead of having the headers generated by default, the 'header row' and 'data start row' were each defined manually. Some of the files had lots of information at the start, and the header was only on row 19, where others started on row 1 in a more standard format. In this flow, 7 different input files were used. For 3 of them, only simple clean steps were required, where headers were renamed to be in a more standardized format. For the remaining 4 input files, an initial clean was used, followed by a pivot. This was because the data was spread horizontally, where each cell on the x-axis was a year, and underneath it the value. By pivoting these files, there were only a few headers remaining, one for the Date and another for the measure, allowing the data to be used for analysis more efficiently. After each pivot, there was a final clean step to standardize header names, remove duplicates created as a result of the pivot, and a reorder of columns so that certain fields came before others. In this flow, there were 7 output files, as each one represented a different economic indicator on a different time period, and I thought that it would be best to keep them separate, rather than try to make the data all look the same (for example, some items were calculated quarterly while others were annually, so date fields didn't match up easily).


In the "MortgageTableauPrep" flow, the data was sourced from the Canadian Mortgage and Housing Corporation (CMHC). There were 3 input files used (each with several tables inside), one describing mortgage delinquency rates, another describing values of mortgages, and the last describing consumer credit impacts from mortgages. This flow became extremely complex as data was transformed to be more consistent and formatted for analysis. The first output was a single file that outlines both the average mortgage loan values and delinquency rates over time, by joining and pivoting the two individual tables for these datapoints together into one, that were both horizontally designed on the x-axis. The next was a file of delinquency rates by age, which was a simple pivot from the input table that was originally in a PivotTable styled format, so the data was pivoted to a tabular columns format by adding a simple identifer column called "Age". The final output file from this flow was a combination of five different tables that were each measuring some indicator on a quarterly basis. No major transformations of pivots were required individually, instead, they were each joined together on fields "Year" and "Quarter". This output gave a file that had "Year" and "Quarter" and then several subsequent columns with various indicators recorded in that Year-Quarter.


Finally, the "StatsCanFlow" flow used data primarily from Statistics Canada that looked at housing investment, and the number and value of building permits issued. This flow was also quite complex as data that was horizontally designed on the x-axis was pivoted and transformed to be in a better format for analysis. The key output file from this flow was called "InvestmentInBuildingConstruction" and it combined 5 different files for various types of housing investment into one, with columns for each year that specified the dollar amount of investment by that type. This was to enable an aggregated analysis of housing investment, and a more granular look by type to see where most increased are being seen. There was one other output file from this flow that combined building permit number and value .CSV files from Statistics Canada into a single file that had a "Date" column, and then two columns, one for number and one for value of building permits issued. This simplified the number of files needed for analysis, as the relevant data could be captured in one file with multiple columns.


Overall, the Tableau Prep data wrangling flows were mainly to combine multiple files into one file ready for analysis to minimize how many different files had to be used. This was mostly done by having a "Date" column as number one, either for the year or quarter of the year, and then subesequent values for various measures inside that time period. There were very few duplicates of data or Null values seen, but in the case that dates did not line up (for example, one statistic began in 1960 and another in 1970), all files being merged were filtered to the most recent date and older data was removed, to provide a more consistent basis for analysis across multiple measures.